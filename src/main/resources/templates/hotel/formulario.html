<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Registrar Hotel</title>
    <!-- Bootstrap 5.3.6 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function agregarHabitacion() {
            const container = document.getElementById('habitaciones-container');
            const template = document.querySelector('.habitacion-template');
            const clone = template.cloneNode(true);
            clone.classList.remove('habitacion-template');
            clone.classList.add('habitacion-item');
            clone.style.display = 'block';
            container.appendChild(clone);
        }

        function eliminarHabitacion(btn) {
            const habitacion = btn.closest('.habitacion-item');
            habitacion.remove();
        }
    </script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">Registrar Hotel</h1>
        <form th:action="@{/hoteles/guardar}" th:object="${hotel}" method="post">
            <div class="mb-3">
                <label class="form-label">Nombre:</label>
                <input type="text" th:field="*{nombre}" class="form-control" />
            </div>

            <div class="mb-3">
                <label class="form-label">Dirección:</label>
                <input type="text" th:field="*{direccion}" class="form-control" />
            </div>

            <div class="mb-3">
                <label class="form-label">Departamento:</label>
                <select th:field="*{departamento.id}" class="form-select">
                    <option th:each="dep : ${departamentos}" th:value="${dep.id}" th:text="${dep.nombre}">Departamento</option>
                </select>
            </div>

            <h3 class="mt-4">Habitaciones</h3>
            <div id="habitaciones-container" class="mb-3">
                <!-- Habitaciones dinámicas se agregarán aquí -->
            </div>
            <button type="button" class="btn btn-outline-primary mb-4" onclick="agregarHabitacion()">+ Añadir Habitación</button>

            <!-- Template oculta -->
            <div class="habitacion-template card mb-3 p-3" style="display: none;">
                <div class="row g-3">
                    <div class="col-md-3">
                        <label class="form-label">Número:</label>
                        <input type="text" name="habitaciones[].numero" class="form-control" />
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Estado:</label>
                        <input type="text" name="habitaciones[].estado" class="form-control" />
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Precio:</label>
                        <input type="number" step="0.01" name="habitaciones[].precio" class="form-control" />
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Tipo:</label>
                        <select name="habitaciones[].tipoHabitacion.id" class="form-select">
                            <option th:each="tipo : ${tiposHabitacion}" th:value="${tipo.id}" th:text="${tipo.nombre}">Tipo</option>
                        </select>
                    </div>
                </div>
                <div class="text-end mt-3">
                    <button type="button" class="btn btn-outline-danger btn-sm" onclick="eliminarHabitacion(this)">Eliminar</button>
                </div>
            </div>

            <div class="d-grid">
                <button type="submit" class="btn btn-success">Guardar Hotel</button>
            </div>
        </form>
    </div>

    <!-- Bootstrap JS (opcional para interactividad como modals o dropdowns) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
